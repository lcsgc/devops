{
  "variables": {
    "image": "utahpacker",
    "tag": "1.0"
  },

  "builders": [
   {
      "author": "Lucas Correia",
      "type": "docker",
      "image": "node:latest",
      "commit": "true",
      "changes": [
	  "ENTRYPOINT [\"\"]",
	  "EXPOSE 3000"
      ]
  }
 ],
 "provisioners": [
    {
      "type": "shell",
      "inline": [
        "apt-get update && apt-get -y install curl",
        "mkdir -p /var/code",
        "cd /root",
        "curl -L https://github.com/lcsgc/content-nodejs-hello-world/archive/v1.tar.gz -o code.tar.gz",
        "tar -xvfz code.tar.gz -C /var/code --strip-components=1",
        "cd /var/code",
        "npm install"
      ]
    }
  ],
  "post-processors": [
    [
      {
        "type": "docker-tag",
        "repository": "{{user `image`}}",
        "tag": "{{user `tag`}}"
      }
    ]
  ]
}
